{"version":3,"file":"LightingSystem-a2ad87a9.js","sources":["../../src/pages/core/LightingSystem.jsx"],"sourcesContent":["import React, { Suspense, useRef } from 'react'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { OrbitControls, Box, Sphere, Plane, Text, useHelper } from '@react-three/drei'\nimport { useControls } from 'leva'\nimport styled from 'styled-components'\nimport { motion } from 'framer-motion'\nimport * as THREE from 'three'\n\nconst PageContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  position: relative;\n  padding-top: 80px;\n`\n\nconst CanvasContainer = styled.div`\n  flex: 1;\n  height: calc(100vh - 80px);\n  position: relative;\n`\n\nconst InfoPanel = styled(motion.div)`\n  width: 350px;\n  background: rgba(26, 26, 26, 0.95);\n  backdrop-filter: blur(20px);\n  border-left: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 2rem;\n  overflow-y: auto;\n  z-index: 100;\n`\n\nconst InfoTitle = styled.h2`\n  color: var(--accent-color);\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`\n\nconst InfoDescription = styled.p`\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin-bottom: 1.5rem;\n`\n\nconst TechList = styled.ul`\n  color: var(--text-secondary);\n  margin-left: 1rem;\n  \n  li {\n    margin-bottom: 0.5rem;\n    \n    code {\n      background: rgba(0, 255, 255, 0.1);\n      color: var(--accent-color);\n      padding: 0.2rem 0.4rem;\n      border-radius: 4px;\n      font-size: 0.9rem;\n    }\n  }\n`\n\nconst CodeSection = styled.details`\n  margin-top: 2rem;\n  \n  summary {\n    color: var(--accent-color);\n    cursor: pointer;\n    font-weight: 600;\n    margin-bottom: 1rem;\n  }\n  \n  pre {\n    background: rgba(0, 0, 0, 0.5);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 8px;\n    padding: 1rem;\n    overflow-x: auto;\n    font-size: 0.8rem;\n    color: var(--text-secondary);\n  }\n`\n\n// 3D Scene Components\nfunction Scene() {\n  return (\n    <>\n      {/* Ground plane */}\n      <Plane \n        args={[20, 20]} \n        rotation={[-Math.PI / 2, 0, 0]} \n        position={[0, -2, 0]}\n        receiveShadow\n      >\n        <meshStandardMaterial color=\"#2c3e50\" />\n      </Plane>\n      \n      {/* Objects that cast shadows */}\n      <Box position={[-3, 0, 0]} args={[1, 1, 1]} castShadow receiveShadow>\n        <meshStandardMaterial color=\"#e74c3c\" />\n      </Box>\n      \n      <Sphere position={[0, 0, 0]} args={[0.8]} castShadow receiveShadow>\n        <meshStandardMaterial color=\"#3498db\" />\n      </Sphere>\n      \n      <Box position={[3, 0, 0]} args={[1, 2, 1]} castShadow receiveShadow>\n        <meshStandardMaterial color=\"#2ecc71\" />\n      </Box>\n      \n      {/* Floating objects */}\n      <Box position={[-1, 3, -2]} args={[0.5, 0.5, 0.5]} castShadow>\n        <meshStandardMaterial color=\"#f39c12\" />\n      </Box>\n      \n      <Sphere position={[2, 2, -1]} args={[0.4]} castShadow>\n        <meshStandardMaterial color=\"#9b59b6\" />\n      </Sphere>\n      \n      {/* Tall pillar */}\n      <Box position={[0, 1, 3]} args={[0.5, 4, 0.5]} castShadow receiveShadow>\n        <meshStandardMaterial color=\"#34495e\" />\n      </Box>\n      \n      {/* Text label */}\n      <Text\n        position={[0, 5, 0]}\n        fontSize={0.8}\n        color=\"#00ffff\"\n        anchorX=\"center\"\n        anchorY=\"middle\"\n      >\n        光照系统演示\n      </Text>\n    </>\n  )\n}\n\nfunction AnimatedLight({ position, color, intensity, type = 'point' }) {\n  const lightRef = useRef()\n  \n  useFrame((state) => {\n    if (lightRef.current && type === 'point') {\n      const time = state.clock.elapsedTime\n      lightRef.current.position.x = position[0] + Math.sin(time) * 2\n      lightRef.current.position.z = position[2] + Math.cos(time) * 2\n    }\n  })\n  \n  if (type === 'directional') {\n    return (\n      <directionalLight\n        ref={lightRef}\n        position={position}\n        color={color}\n        intensity={intensity}\n        castShadow\n        shadow-mapSize-width={2048}\n        shadow-mapSize-height={2048}\n        shadow-camera-far={50}\n        shadow-camera-left={-10}\n        shadow-camera-right={10}\n        shadow-camera-top={10}\n        shadow-camera-bottom={-10}\n      />\n    )\n  }\n  \n  return (\n    <pointLight\n      ref={lightRef}\n      position={position}\n      color={color}\n      intensity={intensity}\n      distance={20}\n      decay={2}\n      castShadow\n      shadow-mapSize-width={1024}\n      shadow-mapSize-height={1024}\n    />\n  )\n}\n\nfunction LightHelpers() {\n  const directionalRef = useRef()\n  const pointRef1 = useRef()\n  const pointRef2 = useRef()\n  const spotRef = useRef()\n  \n  const { showHelpers } = useControls('辅助工具', {\n    showHelpers: { value: true }\n  })\n  \n  useHelper(showHelpers && directionalRef, THREE.DirectionalLightHelper, 1, 'yellow')\n  useHelper(showHelpers && pointRef1, THREE.PointLightHelper, 0.5, 'red')\n  useHelper(showHelpers && pointRef2, THREE.PointLightHelper, 0.5, 'blue')\n  useHelper(showHelpers && spotRef, THREE.SpotLightHelper, 'green')\n  \n  return (\n    <>\n      <directionalLight\n        ref={directionalRef}\n        position={[10, 10, 5]}\n        intensity={1}\n        castShadow\n        shadow-mapSize-width={2048}\n        shadow-mapSize-height={2048}\n      />\n      \n      <pointLight\n        ref={pointRef1}\n        position={[-5, 3, -5]}\n        color=\"#ff6b6b\"\n        intensity={1}\n        distance={15}\n        castShadow\n      />\n      \n      <pointLight\n        ref={pointRef2}\n        position={[5, 3, 5]}\n        color=\"#4ecdc4\"\n        intensity={1}\n        distance={15}\n        castShadow\n      />\n      \n      <spotLight\n        ref={spotRef}\n        position={[0, 8, 0]}\n        angle={Math.PI / 6}\n        penumbra={0.5}\n        intensity={2}\n        color=\"#ffffff\"\n        castShadow\n        shadow-mapSize-width={1024}\n        shadow-mapSize-height={1024}\n      />\n    </>\n  )\n}\n\nfunction LightingControls() {\n  const {\n    ambientIntensity,\n    directionalIntensity,\n    pointIntensity,\n    spotIntensity,\n    shadowsEnabled\n  } = useControls('光照控制', {\n    ambientIntensity: { value: 0.3, min: 0, max: 2, step: 0.1 },\n    directionalIntensity: { value: 1, min: 0, max: 3, step: 0.1 },\n    pointIntensity: { value: 1, min: 0, max: 3, step: 0.1 },\n    spotIntensity: { value: 2, min: 0, max: 5, step: 0.1 },\n    shadowsEnabled: { value: true }\n  })\n  \n  return (\n    <>\n      <ambientLight intensity={ambientIntensity} />\n    </>\n  )\n}\n\nfunction LightingSystem() {\n  return (\n    <PageContainer>\n      <CanvasContainer>\n        <Canvas\n          shadows\n          camera={{ position: [8, 6, 8], fov: 75 }}\n          gl={{ antialias: true, shadowMap: { enabled: true, type: THREE.PCFSoftShadowMap } }}\n        >\n          <Suspense fallback={null}>\n            <Scene />\n            <LightingControls />\n            <LightHelpers />\n            <OrbitControls\n              enableDamping\n              dampingFactor={0.05}\n              minDistance={3}\n              maxDistance={30}\n            />\n          </Suspense>\n        </Canvas>\n      </CanvasContainer>\n      \n      <InfoPanel\n        initial={{ x: 350 }}\n        animate={{ x: 0 }}\n        transition={{ duration: 0.5 }}\n      >\n        <InfoTitle>\n          💡 光照系统\n        </InfoTitle>\n        \n        <InfoDescription>\n          Three.js 提供了多种光源类型来模拟真实世界的光照效果。本演示展示了环境光、方向光、点光源、聚光灯的特性和阴影效果。\n        </InfoDescription>\n        \n        <h3 style={{ color: 'var(--accent-color)', marginBottom: '1rem' }}>光源类型</h3>\n        <TechList>\n          <li><code>AmbientLight</code> - 环境光，均匀照亮所有物体</li>\n          <li><code>DirectionalLight</code> - 方向光，模拟太阳光</li>\n          <li><code>PointLight</code> - 点光源，从一点向四周发光</li>\n          <li><code>SpotLight</code> - 聚光灯，锥形光束</li>\n          <li><code>HemisphereLight</code> - 半球光，模拟天空光</li>\n          <li><code>RectAreaLight</code> - 矩形区域光</li>\n        </TechList>\n        \n        <h3 style={{ color: 'var(--accent-color)', marginBottom: '1rem', marginTop: '2rem' }}>阴影系统</h3>\n        <TechList>\n          <li><code>castShadow</code> - 物体投射阴影</li>\n          <li><code>receiveShadow</code> - 物体接收阴影</li>\n          <li><code>PCFSoftShadowMap</code> - 软阴影算法</li>\n          <li><code>shadow-mapSize</code> - 阴影贴图分辨率</li>\n        </TechList>\n        \n        <h3 style={{ color: 'var(--accent-color)', marginBottom: '1rem', marginTop: '2rem' }}>交互说明</h3>\n        <InfoDescription>\n          • 使用右侧控制面板调整光照参数<br/>\n          • 观察不同光源的照明效果<br/>\n          • 注意阴影的形成和变化<br/>\n          • 彩色光源会影响物体颜色\n        </InfoDescription>\n        \n        <CodeSection>\n          <summary>🔍 查看核心代码</summary>\n          <pre>{`// 方向光设置\nconst directionalLight = new THREE.DirectionalLight(0xffffff, 1)\ndirectionalLight.position.set(10, 10, 5)\ndirectionalLight.castShadow = true\ndirectionalLight.shadow.mapSize.width = 2048\ndirectionalLight.shadow.mapSize.height = 2048\n\n// 点光源设置\nconst pointLight = new THREE.PointLight(0xff6b6b, 1, 15, 2)\npointLight.position.set(-5, 3, -5)\npointLight.castShadow = true\n\n// 聚光灯设置\nconst spotLight = new THREE.SpotLight(0xffffff, 2, 20, Math.PI / 6, 0.5)\nspotLight.position.set(0, 8, 0)\nspotLight.castShadow = true\n\n// 启用阴影\nrenderer.shadowMap.enabled = true\nrenderer.shadowMap.type = THREE.PCFSoftShadowMap`}</pre>\n        </CodeSection>\n      </InfoPanel>\n    </PageContainer>\n  )\n}\n\nexport default LightingSystem"],"names":["PageContainer","styled","CanvasContainer","InfoPanel","motion","InfoTitle","InfoDescription","TechList","CodeSection","Scene","jsxs","Fragment","jsx","Plane","Box","Sphere","Text","LightHelpers","directionalRef","useRef","pointRef1","pointRef2","spotRef","showHelpers","useControls","useHelper","THREE.DirectionalLightHelper","THREE.PointLightHelper","THREE.SpotLightHelper","LightingControls","ambientIntensity","directionalIntensity","pointIntensity","spotIntensity","shadowsEnabled","LightingSystem","Canvas","THREE.PCFSoftShadowMap","Suspense","OrbitControls"],"mappings":"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"}